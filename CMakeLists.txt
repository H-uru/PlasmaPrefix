cmake_minimum_required(VERSION 3.0)
project(PlasmaPrefix NONE)

option(BUILD_STATIC_LIBS "Build static libraries instead of DLLs" ON)
set(BUILD_ARCH "x86" CACHE STRING "Target architecture for building projects")
set_property(CACHE BUILD_ARCH PROPERTY STRINGS x86 x64)
set(MSVC_VERSION "2013" CACHE STRING "Target MSVC Version for building projects")
set(INSTALL_DIR "${CMAKE_SOURCE_DIR}/prefix" CACHE STRING "Path to install built libraries and headers")

if(MSVC_VERSION STREQUAL "2013")
    set(VCSLN_GENERATOR "Visual Studio 12 2013")
elseif(MSVC_VERSION STREQUAL "2015")
    set(VCSLN_GENERATOR "Visual Studio 14 2015")
elseif(MSVC_VERSION STREQUAL "2017")
    set(VCSLN_GENERATOR "Visual Studio 15 2017")
else()
    message(FATAL_ERROR "Unsupported or unknown MSVC_VERSION ${MSVC_VERSION}")
endif()

if(BUILD_ARCH STREQUAL "x86")
    # No generator suffix
elseif(BUILD_ARCH STREQUAL "x64")
    set(VCSLN_GENERATOR "${VCSLN_GENERATOR} Win64")
else()
    message(FATAL_ERROR "Unsupported or unknown BUILD_ARCH ${BUILD_ARCH}")
endif()

function(check_download pkgname tarball)
    list(GET ${pkgname}_STATUS 0 RESULT)
    list(GET ${pkgname}_STATUS 1 MESSAGE)
    if(NOT RESULT EQUAL 0)
        message(FATAL_ERROR ${MESSAGE})
    endif()
endfunction()

include(zlib.cmake)
include(libpng.cmake)
